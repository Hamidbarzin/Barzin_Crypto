{% extends "minimal_base.html" %}

{% block title %}Cryptocurrency News | Crypto Barzin{% endblock %}

{% block styles %}
<style>
    .news-container {
        margin-top: 20px;
    }
    .news-card {
        margin-bottom: 15px;
        overflow: hidden;
        transition: all 0.3s ease;
        border-radius: 8px;
        border: 1px solid #2b2f36;
        background-color: #181A20;
    }
    .news-card:hover {
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        transform: translateY(-3px);
    }
    .news-image {
        height: 180px;
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
    }
    .news-image-placeholder {
        height: 180px;
        background-color: #2b2f36;
        display: flex;
        align-items: center;
        justify-content: center;
        color: #848E9C;
    }
    .news-date {
        font-size: 0.8rem;
        color: #848E9C;
    }
    .news-title {
        font-size: 1.1rem;
        font-weight: bold;
        margin-bottom: 5px;
        line-height: 1.4;
    }
    .news-source {
        font-size: 0.85rem;
        background-color: #FCD535;
        color: #181A20;
        padding: 2px 8px;
        border-radius: 4px;
        display: inline-block;
        margin-right: 5px;
    }
    .sentiment-card {
        background-color: #181A20;
        border: 1px solid #2b2f36;
        border-radius: 8px;
        padding: 20px;
        margin-bottom: 30px;
    }
    .sentiment-score {
        font-size: 2.5rem;
        font-weight: bold;
        text-align: center;
    }
    .sentiment-bullish {
        color: #0ECB81;
    }
    .sentiment-bearish {
        color: #F6465D;
    }
    .sentiment-neutral {
        color: #848E9C;
    }
    .sentiment-label {
        text-align: center;
        font-size: 1.2rem;
        margin-top: 5px;
    }
    .fear-greed-container {
        position: relative;
        height: 10px;
        background-color: #2b2f36;
        border-radius: 5px;
        margin: 15px 0;
        overflow: hidden;
    }
    .fear-greed-indicator {
        position: absolute;
        width: 20px;
        height: 20px;
        background-color: #FCD535;
        border-radius: 50%;
        top: -5px;
        transform: translateX(-50%);
        z-index: 2;
    }
    .fear-greed-scale {
        display: flex;
        justify-content: space-between;
        font-size: 0.85rem;
        color: #848E9C;
    }
    .loading-spinner {
        display: flex;
        justify-content: center;
        padding: 50px 0;
    }
    .sentiment-description {
        text-align: center;
        margin-top: 15px;
        font-style: italic;
        color: #848E9C;
    }
    .news-controls {
        margin-bottom: 20px;
        display: flex;
        align-items: center;
        flex-wrap: wrap;
    }
    .news-actions {
        margin-right: auto;
    }
    .sentiment-title {
        color: #FCD535;
        margin-bottom: 20px;
        text-align: center;
    }
    .sentiment-updated {
        text-align: center;
        font-size: 0.8rem;
        color: #848E9C;
        margin-top: 10px;
    }
    .sentiment-icons {
        font-size: 1.5rem;
        text-align: center;
        margin: 5px 0;
    }
    .telegram-button {
        margin-top: 20px;
    }
</style>
{% endblock %}

{% block content %}
<div class="container">
    <h1 class="mt-4 mb-4">Ø§Ø®Ø¨Ø§Ø± Ø§Ø±Ø²Ù‡Ø§ÛŒ Ø¯ÛŒØ¬ÛŒØªØ§Ù„</h1>
    
    <div class="news-controls">
        <div class="news-filter">
            <select id="newsSource" class="form-select">
                <option value="all">Ù‡Ù…Ù‡ Ù…Ù†Ø§Ø¨Ø¹</option>
                <option value="CryptoCompare">CryptoCompare</option>
                <option value="CoinDesk">CoinDesk</option>
                <option value="CoinTelegraph">CoinTelegraph</option>
            </select>
        </div>
        <div class="news-actions">
            <button id="refreshNewsBtn" class="btn btn-primary">
                <i class="fas fa-sync-alt"></i> Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø§Ø®Ø¨Ø§Ø±
            </button>
            <button id="sendNewsToTelegramBtn" class="btn btn-warning">
                <i class="fab fa-telegram"></i> Ø§Ø±Ø³Ø§Ù„ Ø¨Ù‡ ØªÙ„Ú¯Ø±Ø§Ù…
            </button>
        </div>
    </div>
    
    <div class="row">
        <!-- Ø³ØªÙˆÙ† Ø§Ø®Ø¨Ø§Ø± -->
        <div class="col-lg-8">
            <div id="newsLoading" class="loading-spinner">
                <div class="spinner-border text-warning" role="status">
                    <span class="visually-hidden">Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ...</span>
                </div>
            </div>
            <div id="newsContainer" class="news-container">
                <!-- Ø§Ø®Ø¨Ø§Ø± Ø§ÛŒÙ†Ø¬Ø§ Ù‚Ø±Ø§Ø± Ù…ÛŒâ€ŒÚ¯ÛŒØ±Ù†Ø¯ -->
            </div>
        </div>
        
        <!-- Ø³ØªÙˆÙ† ØªØ­Ù„ÛŒÙ„ Ø§Ø­Ø³Ø§Ø³Ø§Øª Ùˆ Ø´Ø§Ø®Øµ ØªØ±Ø³ Ùˆ Ø·Ù…Ø¹ -->
        <div class="col-lg-4">
            <div id="sentimentLoading" class="loading-spinner">
                <div class="spinner-border text-warning" role="status">
                    <span class="visually-hidden">Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ...</span>
                </div>
            </div>
            <div id="sentimentContainer" style="display: none;">
                <div class="sentiment-card">
                    <h3 class="sentiment-title">ØªØ­Ù„ÛŒÙ„ Ø§Ø­Ø³Ø§Ø³Ø§Øª Ø¨Ø§Ø²Ø§Ø±</h3>
                    
                    <div id="sentimentScoreContainer" class="sentiment-score sentiment-neutral">
                        50
                    </div>
                    
                    <div id="sentimentLabelContainer" class="sentiment-label">
                        Ø®Ù†Ø«ÛŒ (Neutral)
                    </div>
                    
                    <div id="sentimentIconsContainer" class="sentiment-icons">
                        ğŸ˜
                    </div>
                    
                    <div class="row mt-4">
                        <div class="col-6">
                            <h5>Ø¨ÛŒØªâ€ŒÚ©ÙˆÛŒÙ†</h5>
                            <div id="bitcoinSentiment">Ø®Ù†Ø«ÛŒ</div>
                        </div>
                        <div class="col-6">
                            <h5>Ø§ØªØ±ÛŒÙˆÙ…</h5>
                            <div id="ethereumSentiment">Ø®Ù†Ø«ÛŒ</div>
                        </div>
                    </div>
                    
                    <div id="sentimentUpdatedContainer" class="sentiment-updated">
                        Ø¢Ø®Ø±ÛŒÙ† Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ: {{now.strftime('%Y-%m-%d %H:%M')}}
                    </div>
                </div>
                
                <div class="sentiment-card">
                    <h3 class="sentiment-title">Ø´Ø§Ø®Øµ ØªØ±Ø³ Ùˆ Ø·Ù…Ø¹</h3>
                    
                    <div id="fearGreedValueContainer" class="sentiment-score">
                        50
                    </div>
                    
                    <div id="fearGreedLabelContainer" class="sentiment-label">
                        Ø®Ù†Ø«ÛŒ (Neutral)
                    </div>
                    
                    <div class="fear-greed-container">
                        <div id="fearGreedIndicator" class="fear-greed-indicator" style="left: 50%;"></div>
                    </div>
                    
                    <div class="fear-greed-scale">
                        <span>ØªØ±Ø³ Ø´Ø¯ÛŒØ¯</span>
                        <span>ØªØ±Ø³</span>
                        <span>Ø®Ù†Ø«ÛŒ</span>
                        <span>Ø·Ù…Ø¹</span>
                        <span>Ø·Ù…Ø¹ Ø´Ø¯ÛŒØ¯</span>
                    </div>
                    
                    <div id="fearGreedUpdatedContainer" class="sentiment-updated">
                        Ø¢Ø®Ø±ÛŒÙ† Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ: {{now.strftime('%Y-%m-%d %H:%M')}}
                    </div>
                </div>
                
                <div class="d-grid gap-2 telegram-button">
                    <button id="sendMarketInsightsBtn" class="btn btn-lg btn-warning">
                        <i class="fab fa-telegram"></i> Ø§Ø±Ø³Ø§Ù„ ØªØ­Ù„ÛŒÙ„ Ø¨Ø§Ø²Ø§Ø± Ø¨Ù‡ ØªÙ„Ú¯Ø±Ø§Ù…
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Ù‚Ø§Ù„Ø¨ Ø®Ø¨Ø± -->
<template id="newsItemTemplate">
    <div class="news-card">
        <div class="row g-0">
            <div class="col-md-4">
                <div class="news-image-placeholder">
                    <i class="fas fa-newspaper fa-3x"></i>
                </div>
            </div>
            <div class="col-md-8">
                <div class="card-body">
                    <h5 class="news-title"></h5>
                    <div class="mb-2">
                        <span class="news-source"></span>
                        <span class="news-date"></span>
                    </div>
                    <p class="card-text"></p>
                    <a href="#" class="btn btn-sm btn-outline-warning mt-2" target="_blank">Ø§Ø¯Ø§Ù…Ù‡ Ù…Ø·Ù„Ø¨</a>
                </div>
            </div>
        </div>
    </div>
</template>
{% endblock %}

{% block scripts %}
<script>
    $(document).ready(function() {
        // Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø§Ø®Ø¨Ø§Ø± Ùˆ ØªØ­Ù„ÛŒÙ„ Ø§Ø­Ø³Ø§Ø³Ø§Øª Ø¯Ø± Ù„ÙˆØ¯ ØµÙØ­Ù‡
        fetchNews();
        fetchMarketInsights();
        
        // Ø±ÙˆÛŒØ¯Ø§Ø¯Ù‡Ø§ÛŒ Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§
        $('#refreshNewsBtn').click(function() {
            fetchNews();
        });
        
        $('#sendNewsToTelegramBtn').click(function() {
            sendNewsToTelegram();
        });
        
        $('#sendMarketInsightsBtn').click(function() {
            sendNewsToTelegram();
        });
        
        // ÙÛŒÙ„ØªØ± Ø¨Ø± Ø§Ø³Ø§Ø³ Ù…Ù†Ø¨Ø¹
        $('#newsSource').change(function() {
            filterNewsBySource($(this).val());
        });
    });
    
    // Ø¯Ø±ÛŒØ§ÙØª Ø§Ø®Ø¨Ø§Ø±
    function fetchNews() {
        $('#newsLoading').show();
        $('#newsContainer').empty();
        
        $.ajax({
            url: '/api/crypto-news',
            method: 'GET',
            success: function(response) {
                $('#newsLoading').hide();
                
                if (response.success && response.news && response.news.length > 0) {
                    renderNews(response.news);
                } else {
                    $('#newsContainer').html('<div class="alert alert-warning">Ø§Ø®Ø¨Ø§Ø±ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯</div>');
                }
            },
            error: function(xhr, status, error) {
                $('#newsLoading').hide();
                $('#newsContainer').html(`<div class="alert alert-danger">Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª Ø§Ø®Ø¨Ø§Ø±: ${error}</div>`);
                console.error('Error fetching news:', error);
            }
        });
    }
    
    // Ø¯Ø±ÛŒØ§ÙØª Ø¨ÛŒÙ†Ø´â€ŒÙ‡Ø§ÛŒ Ø¨Ø§Ø²Ø§Ø±
    function fetchMarketInsights() {
        $('#sentimentLoading').show();
        $('#sentimentContainer').hide();
        
        $.ajax({
            url: '/api/market-insights',
            method: 'GET',
            success: function(response) {
                $('#sentimentLoading').hide();
                $('#sentimentContainer').show();
                
                if (response.success && response.data) {
                    renderSentimentData(response.data);
                } else {
                    showSentimentError('Ø§Ø·Ù„Ø§Ø¹Ø§Øª ØªØ­Ù„ÛŒÙ„ Ø§Ø­Ø³Ø§Ø³Ø§Øª Ø¯Ø± Ø¯Ø³ØªØ±Ø³ Ù†ÛŒØ³Øª');
                }
            },
            error: function(xhr, status, error) {
                $('#sentimentLoading').hide();
                showSentimentError(`Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª ØªØ­Ù„ÛŒÙ„ Ø§Ø­Ø³Ø§Ø³Ø§Øª: ${error}`);
                console.error('Error fetching market insights:', error);
            }
        });
    }
    
    // Ù†Ù…Ø§ÛŒØ´ Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø®Ø´ ØªØ­Ù„ÛŒÙ„ Ø§Ø­Ø³Ø§Ø³Ø§Øª
    function showSentimentError(message) {
        $('#sentimentContainer').html(`<div class="alert alert-danger">${message}</div>`);
        $('#sentimentContainer').show();
    }
    
    // Ù†Ù…Ø§ÛŒØ´ Ø§Ø®Ø¨Ø§Ø±
    function renderNews(newsItems) {
        const container = $('#newsContainer');
        const template = $('#newsItemTemplate');
        
        newsItems.forEach(item => {
            const newsElement = $(template.html());
            
            // ØªÙ†Ø¸ÛŒÙ… Ø¹Ù†ÙˆØ§Ù† - Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø¹Ù†ÙˆØ§Ù† ÙØ§Ø±Ø³ÛŒ Ø¯Ø± ØµÙˆØ±Øª ÙˆØ¬ÙˆØ¯
            const title = item.title_fa || item.title;
            newsElement.find('.news-title').text(title);
            
            // ØªÙ†Ø¸ÛŒÙ… Ù…Ù†Ø¨Ø¹
            newsElement.find('.news-source').text(item.source);
            newsElement.attr('data-source', item.source);
            
            // ØªÙ†Ø¸ÛŒÙ… ØªØ§Ø±ÛŒØ®
            const publishDate = item.published_date || '';
            newsElement.find('.news-date').text(publishDate);
            
            // ØªÙ†Ø¸ÛŒÙ… Ù„ÛŒÙ†Ú©
            const newsUrl = item.url || '#';
            newsElement.find('a').attr('href', newsUrl);
            
            // ØªÙ†Ø¸ÛŒÙ… ØªØµÙˆÛŒØ± (Ø§Ú¯Ø± Ù…ÙˆØ¬ÙˆØ¯ Ø¨Ø§Ø´Ø¯)
            if (item.imageurl) {
                newsElement.find('.news-image-placeholder').removeClass('news-image-placeholder').addClass('news-image').css('background-image', `url(${item.imageurl})`);
            }
            
            container.append(newsElement);
        });
    }
    
    // Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ ØªØ­Ù„ÛŒÙ„ Ø§Ø­Ø³Ø§Ø³Ø§Øª
    function renderSentimentData(data) {
        // ØªØ­Ù„ÛŒÙ„ Ø§Ø­Ø³Ø§Ø³Ø§Øª
        const sentiment = data.sentiment || {};
        
        // ØªÙ†Ø¸ÛŒÙ… Ø§Ù…ØªÛŒØ§Ø² Ø§Ø­Ø³Ø§Ø³Ø§Øª
        const sentimentScore = sentiment.sentiment_score || 50;
        $('#sentimentScoreContainer').text(sentimentScore);
        
        // ØªÙ†Ø¸ÛŒÙ… ÙˆØ¶Ø¹ÛŒØª Ùˆ Ø±Ù†Ú¯
        let sentimentClass = 'sentiment-neutral';
        let sentimentText = 'Ø®Ù†Ø«ÛŒ (Neutral)';
        let sentimentEmoji = 'ğŸ˜';
        
        if (sentiment.overall_sentiment === 'bullish') {
            sentimentClass = 'sentiment-bullish';
            sentimentText = 'ØµØ¹ÙˆØ¯ÛŒ (Bullish)';
            sentimentEmoji = 'ğŸš€';
        } else if (sentiment.overall_sentiment === 'bearish') {
            sentimentClass = 'sentiment-bearish';
            sentimentText = 'Ù†Ø²ÙˆÙ„ÛŒ (Bearish)';
            sentimentEmoji = 'ğŸ»';
        }
        
        $('#sentimentScoreContainer').removeClass('sentiment-bullish sentiment-bearish sentiment-neutral').addClass(sentimentClass);
        $('#sentimentLabelContainer').text(sentimentText);
        $('#sentimentIconsContainer').text(sentimentEmoji);
        
        // ØªÙ†Ø¸ÛŒÙ… ÙˆØ¶Ø¹ÛŒØª Ø¨ÛŒØªâ€ŒÚ©ÙˆÛŒÙ† Ùˆ Ø§ØªØ±ÛŒÙˆÙ…
        $('#bitcoinSentiment').text(translateSentiment(sentiment.bitcoin_sentiment));
        $('#ethereumSentiment').text(translateSentiment(sentiment.ethereum_sentiment));
        
        // ØªÙ†Ø¸ÛŒÙ… ØªØ§Ø±ÛŒØ® Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ
        if (sentiment.updated_at) {
            $('#sentimentUpdatedContainer').text(`Ø¢Ø®Ø±ÛŒÙ† Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ: ${sentiment.updated_at}`);
        }
        
        // Ø´Ø§Ø®Øµ ØªØ±Ø³ Ùˆ Ø·Ù…Ø¹
        const fearGreed = data.fear_greed_index || {};
        const fgValue = fearGreed.value || 50;
        
        // ØªÙ†Ø¸ÛŒÙ… Ù…Ù‚Ø¯Ø§Ø± Ùˆ ÙˆØ¶Ø¹ÛŒØª
        $('#fearGreedValueContainer').text(fgValue);
        $('#fearGreedLabelContainer').text(fearGreed.value_classification || 'Ø®Ù†Ø«ÛŒ (Neutral)');
        
        // ØªÙ†Ø¸ÛŒÙ… Ù†Ø´Ø§Ù†Ú¯Ø±
        const position = fgValue + '%';
        $('#fearGreedIndicator').css('left', position);
        
        // ØªÙ†Ø¸ÛŒÙ… ØªØ§Ø±ÛŒØ® Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ
        if (fearGreed.date) {
            $('#fearGreedUpdatedContainer').text(`Ø¢Ø®Ø±ÛŒÙ† Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ: ${fearGreed.date}`);
        }
    }
    
    // ØªØ±Ø¬Ù…Ù‡ ÙˆØ¶Ø¹ÛŒØª Ø§Ø­Ø³Ø§Ø³Ø§Øª
    function translateSentiment(sentiment) {
        if (!sentiment) return 'Ù†Ø§Ù…Ø´Ø®Øµ';
        
        switch(sentiment.toLowerCase()) {
            case 'bullish': return 'ØµØ¹ÙˆØ¯ÛŒ';
            case 'bearish': return 'Ù†Ø²ÙˆÙ„ÛŒ';
            case 'neutral': return 'Ø®Ù†Ø«ÛŒ';
            default: return sentiment;
        }
    }
    
    // ÙÛŒÙ„ØªØ± Ø§Ø®Ø¨Ø§Ø± Ø¨Ø± Ø§Ø³Ø§Ø³ Ù…Ù†Ø¨Ø¹
    function filterNewsBySource(source) {
        if (source === 'all') {
            $('.news-card').show();
        } else {
            $('.news-card').hide();
            $(`.news-card[data-source="${source}"]`).show();
        }
    }
    
    // Ø§Ø±Ø³Ø§Ù„ Ø§Ø®Ø¨Ø§Ø± Ø¨Ù‡ ØªÙ„Ú¯Ø±Ø§Ù…
    function sendNewsToTelegram() {
        // ØºÛŒØ±ÙØ¹Ø§Ù„ Ú©Ø±Ø¯Ù† Ø¯Ú©Ù…Ù‡
        const button = $('#sendNewsToTelegramBtn');
        button.prop('disabled', true).html('<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> Ø¯Ø± Ø­Ø§Ù„ Ø§Ø±Ø³Ø§Ù„...');
        
        $.ajax({
            url: '/api/telegram/send-news',
            method: 'POST',
            success: function(response) {
                if (response.success) {
                    showToast('Ù…ÙˆÙÙ‚ÛŒØª', 'Ø§Ø®Ø¨Ø§Ø± Ùˆ ØªØ­Ù„ÛŒÙ„ Ø¨Ø§Ø²Ø§Ø± Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø¨Ù‡ ØªÙ„Ú¯Ø±Ø§Ù… Ø§Ø±Ø³Ø§Ù„ Ø´Ø¯', 'success');
                } else {
                    showToast('Ø®Ø·Ø§', response.message || 'Ø®Ø·Ø§ Ø¯Ø± Ø§Ø±Ø³Ø§Ù„ Ø§Ø®Ø¨Ø§Ø± Ø¨Ù‡ ØªÙ„Ú¯Ø±Ø§Ù…', 'error');
                }
            },
            error: function(xhr, status, error) {
                showToast('Ø®Ø·Ø§', `Ø®Ø·Ø§ Ø¯Ø± Ø§Ø±Ø³Ø§Ù„ Ø§Ø®Ø¨Ø§Ø± Ø¨Ù‡ ØªÙ„Ú¯Ø±Ø§Ù…: ${error}`, 'error');
                console.error('Error sending news to Telegram:', error);
            },
            complete: function() {
                // ÙØ¹Ø§Ù„ Ú©Ø±Ø¯Ù† Ù…Ø¬Ø¯Ø¯ Ø¯Ú©Ù…Ù‡
                button.prop('disabled', false).html('<i class="fab fa-telegram"></i> Ø§Ø±Ø³Ø§Ù„ Ø¨Ù‡ ØªÙ„Ú¯Ø±Ø§Ù…');
            }
        });
    }
    
    // Ù†Ù…Ø§ÛŒØ´ Ø§Ø¹Ù„Ø§Ù†
    function showToast(title, message, type = 'info') {
        // Ø§Ú¯Ø± Ø§Ø² Ú©ØªØ§Ø¨Ø®Ø§Ù†Ù‡â€ŒÙ‡Ø§ÛŒ Ø§Ø¹Ù„Ø§Ù† Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒÚ©Ù†ÛŒØ¯ØŒ Ø§Ø² Ø¢Ù†â€ŒÙ‡Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯
        // Ø¯Ø± ØºÛŒØ± Ø§ÛŒÙ† ØµÙˆØ±Øª Ø§Ø² ÛŒÚ© Ø§Ø¹Ù„Ø§Ù† Ø³Ø§Ø¯Ù‡ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ…
        alert(`${title}: ${message}`);
    }
</script>
{% endblock %}