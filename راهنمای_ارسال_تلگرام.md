# راهنمای استفاده از سیستم تلگرام Crypto Barzin

این راهنما نحوه استفاده از سیستم تلگرام Crypto Barzin را توضیح می‌دهد. با استفاده از این سیستم می‌توانید گزارش‌های قیمت، تحلیل‌های تکنیکال و سیگنال‌های معاملاتی را به صورت خودکار یا دستی دریافت کنید.

## پیش‌نیازها

1. توکن بات تلگرام
2. شناسه چت تلگرام

این مقادیر از قبل در سیستم تنظیم شده‌اند:
- توکن بات: `7429658178:AAFc8hfXeog2Cu8EWOcXQbMc5Nn-q-f1ePk`
- شناسه چت: `722627622`

اگر می‌خواهید از بات یا چت دیگری استفاده کنید، می‌توانید این مقادیر را از طریق متغیرهای محیطی تغییر دهید.

## روش‌های ارسال پیام

### 1. ارسال پیام تست 

برای ارسال یک پیام تست و بررسی صحت عملکرد سیستم:

```bash
python telegram_test.py
```

### 2. ارسال پیام با استفاده از سیستم ساده

```bash
python simple_telegram_sender.py test      # ارسال پیام تست
python simple_telegram_sender.py prices    # ارسال گزارش قیمت‌ها
python simple_telegram_sender.py info      # دریافت اطلاعات بات
```

### 3. اجرای سرویس خودکار

سرویس خودکار به صورت دوره‌ای (هر ۳۰ دقیقه یک بار) گزارش قیمت‌ها و هر ۴ ساعت یک بار یک پیام وضعیت ارسال می‌کند.

```bash
python run_telegram_workflow.py
```

## رفع مشکلات رایج

### مشکل: پیام‌ها ارسال نمی‌شوند

1. بررسی اتصال به اینترنت
2. بررسی صحت توکن بات (با اجرای دستور `python simple_telegram_sender.py info`)
3. بررسی صحت شناسه چت
4. بررسی لاگ‌ها برای یافتن خطاهای احتمالی

### مشکل: سرویس خودکار متوقف می‌شود

در محیط Replit، فرآیندهای پس‌زمینه پس از مدتی خاتمه می‌یابند. برای اجرای پایدار سرویس، باید آن را روی یک سرور خارجی مانند Fly.io میزبانی کنید. راهنمای کامل در فایل `راهنمای_تلگرام_روی_سرور.md` موجود است.

## تنظیمات پیشرفته

### تغییر فرکانس ارسال پیام‌ها

اگر می‌خواهید فرکانس ارسال پیام‌ها را تغییر دهید، می‌توانید فایل `run_telegram_workflow.py` را ویرایش کنید:

1. برای تغییر فرکانس گزارش قیمت‌ها، مقدار `timedelta(minutes=30)` را تغییر دهید
2. برای تغییر فرکانس پیام‌های وضعیت، مقدار `timedelta(hours=4)` را تغییر دهید

### افزودن انواع جدید پیام

برای افزودن انواع جدید پیام، می‌توانید توابع جدیدی در فایل `run_telegram_workflow.py` اضافه کنید و آن‌ها را در تابع `run_telegram_service` فراخوانی کنید.

## نکات مهم

1. برای دریافت داده‌های واقعی قیمت، باید از یک API معتبر استفاده کنید
2. در نسخه فعلی از داده‌های شبیه‌سازی شده استفاده می‌شود
3. برای استفاده دائمی و پایدار، توصیه می‌شود از یک سرور خارجی استفاده کنید