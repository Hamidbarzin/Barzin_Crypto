# راهنمای گزارش‌دهنده هر ۱۰ دقیقه Crypto Barzin

این راهنما نحوه استفاده از سیستم گزارش‌دهنده هر ۱۰ دقیقه Crypto Barzin را توضیح می‌دهد.

## مقدمه

به دلیل محدودیت‌های محیط Replit در نگهداری فرآیندهای پس‌زمینه، یک سیستم بسیار ساده برای ارسال خودکار پیام‌های تلگرام هر ۱۰ دقیقه ایجاد کرده‌ایم. این سیستم از API رسمی تلگرام استفاده می‌کند و نیازی به کتابخانه‌های پیچیده ندارد.

## فایل‌های اصلی

1. `ten_minute_telegram_sender.py` - اسکریپت اصلی ارسال پیام هر ۱۰ دقیقه
2. `اجرای_گزارش_دهنده_هر_۱۰_دقیقه.sh` - اسکریپت راه‌اندازی سرویس
3. `توقف_گزارش_دهنده_هر_۱۰_دقیقه.sh` - اسکریپت توقف سرویس

## نحوه استفاده

### راه‌اندازی سرویس

برای راه‌اندازی سرویس گزارش‌دهنده هر ۱۰ دقیقه، دستور زیر را اجرا کنید:

```bash
./اجرای_گزارش_دهنده_هر_۱۰_دقیقه.sh
```

این دستور سرویس را در پس‌زمینه اجرا می‌کند. سرویس:
- بلافاصله یک پیام تست ارسال می‌کند
- هر ۱۰ دقیقه یک گزارش قیمت ارسال می‌کند
- هر ۶ ساعت یک گزارش وضعیت سیستم ارسال می‌کند

### توقف سرویس

برای توقف سرویس، دستور زیر را اجرا کنید:

```bash
./توقف_گزارش_دهنده_هر_۱۰_دقیقه.sh
```

### بررسی وضعیت سرویس

برای بررسی وضعیت سرویس، دستور زیر را اجرا کنید:

```bash
cat ten_minute_telegram_sender.log
```

و برای بررسی فایل PID:

```bash
cat ten_minute_telegram_sender.pid
```

## نکات مهم

1. **محیط Replit:** در محیط Replit، فرآیندهای پس‌زمینه پس از مدتی به طور خودکار متوقف می‌شوند. حتی با این سیستم ساده‌تر، ممکن است سرویس پس از مدتی متوقف شود. برای اطمینان از کارکرد مداوم، توصیه می‌کنیم آن را روی یک سرور خارجی میزبانی کنید.

2. **استفاده از CoinGecko API:** این سیستم ابتدا تلاش می‌کند قیمت‌های واقعی را از CoinGecko دریافت کند. در صورت بروز خطا، از قیمت‌های تصادفی استفاده می‌کند.

3. **تغییر توکن و چت آیدی:** برای تغییر توکن بات و چت آیدی، متغیرهای `TOKEN` و `CHAT_ID` را در ابتدای فایل `ten_minute_telegram_sender.py` تغییر دهید یا آنها را به عنوان متغیرهای محیطی تنظیم کنید.

4. **تغییر زمان ارسال:** برای تغییر فاصله زمانی ارسال پیام‌ها، مقدار `time.sleep(600)` را در فایل `ten_minute_telegram_sender.py` تغییر دهید (600 ثانیه = 10 دقیقه).

## عیب‌یابی

1. **پیام‌ها ارسال نمی‌شوند:**
   - فایل لاگ را بررسی کنید: `cat ten_minute_telegram_sender.log`
   - بررسی کنید که توکن و چت آیدی صحیح باشند
   - بررسی کنید که بات در چت یا گروه مورد نظر افزوده شده باشد
   - برای چت‌های شخصی، چت را با بات شروع کنید (دستور /start)

2. **سرویس متوقف می‌شود:**
   - در محیط Replit، فرآیندهای پس‌زمینه پس از مدتی متوقف می‌شوند
   - مجدداً سرویس را راه‌اندازی کنید: `./اجرای_گزارش_دهنده_هر_۱۰_دقیقه.sh`
   - برای استفاده پایدار، سیستم را روی یک سرور خارجی میزبانی کنید

3. **خطا در دریافت قیمت‌ها:**
   - در صورت خطا در دریافت قیمت‌های واقعی، سیستم به طور خودکار از قیمت‌های تصادفی استفاده می‌کند
   - برای رفع محدودیت‌های API، می‌توانید یک کلید API برای CoinGecko تهیه کنید