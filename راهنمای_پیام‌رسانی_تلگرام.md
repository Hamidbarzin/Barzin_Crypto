# راهنمای پیام‌رسانی تلگرام Crypto Barzin

این راهنما نحوه استفاده از سیستم پیام‌رسانی تلگرام برای ارسال گزارش‌های دوره‌ای قیمت و وضعیت سیستم را توضیح می‌دهد.

## ویژگی‌ها

- **ارسال خودکار هر ۱۰ دقیقه**: گزارش‌های قیمت به صورت خودکار هر ۱۰ دقیقه ارسال می‌شوند
- **گزارش وضعیت سیستم هر ۶ ساعت**: گزارش وضعیت سیستم هر ۶ ساعت (۳۶ بار ۱۰ دقیقه) ارسال می‌شود
- **نمایش تاریخ و زمان به وقت تورنتو**: تمامی زمان‌ها بر اساس منطقه زمانی تورنتو (کانادا) نمایش داده می‌شوند
- **قابلیت کنترل دستی**: امکان ارسال پیام‌های تست و گزارش‌ها به صورت دستی از طریق پنل کنترل وب

## دستورات اجرایی

### راه‌اندازی سرویس ارسال خودکار

برای راه‌اندازی سرویس ارسال خودکار پیام‌های تلگرام، از دستور زیر استفاده کنید:

```bash
./اجرای_خودکار_تلگرام.sh
```

این دستور باعث می‌شود که هر ۱۰ دقیقه یک گزارش قیمت و هر ۶ ساعت یک گزارش وضعیت سیستم به تلگرام ارسال شود.

### توقف سرویس ارسال خودکار

برای متوقف کردن سرویس ارسال خودکار پیام‌های تلگرام، از دستور زیر استفاده کنید:

```bash
./توقف_خودکار_تلگرام.sh
```

### بررسی وضعیت سرویس

برای بررسی وضعیت فعلی سرویس، می‌توانید لاگ‌های آن را مشاهده کنید:

```bash
cat auto_telegram_sender.log
```

## پنل کنترل وب

برای ارسال دستی پیام‌ها، می‌توانید از پنل کنترل وب در آدرس زیر استفاده کنید:

```
http://SERVER_URL/telegram_control
```

در این پنل می‌توانید:
- پیام تست ارسال کنید
- گزارش قیمت‌ها را ارسال کنید
- گزارش وضعیت سیستم را ارسال کنید

## عیب‌یابی

اگر پیام‌ها ارسال نمی‌شوند:

1. بررسی کنید که سرور اصلی در حال اجرا باشد
2. بررسی کنید که توکن بات تلگرام و شناسه چت به درستی تنظیم شده باشند
3. لاگ‌های سیستم را بررسی کنید:
   ```bash
   cat auto_telegram_sender.log
   ```
4. اگر سرویس متوقف شده است، می‌توانید آن را مجدداً راه‌اندازی کنید:
   ```bash
   ./اجرای_خودکار_تلگرام.sh
   ```

## فایل‌های مرتبط

- `auto_telegram_sender.py`: اسکریپت اصلی ارسال خودکار پیام‌های تلگرام
- `start_auto_telegram.sh`: اسکریپت راه‌اندازی سرویس (نسخه انگلیسی)
- `stop_auto_telegram.sh`: اسکریپت توقف سرویس (نسخه انگلیسی)
- `اجرای_خودکار_تلگرام.sh`: اسکریپت راه‌اندازی سرویس (نسخه فارسی)
- `توقف_خودکار_تلگرام.sh`: اسکریپت توقف سرویس (نسخه فارسی)
- `auto_telegram_sender.log`: فایل لاگ سرویس
- `auto_telegram_sender.pid`: فایل حاوی شناسه فرآیند سرویس در حال اجرا