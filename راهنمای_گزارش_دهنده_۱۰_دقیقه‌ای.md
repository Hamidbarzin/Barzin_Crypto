# راهنمای استفاده از گزارش‌دهنده ۱۰ دقیقه‌ای تلگرام

این راهنما نحوه استفاده از سیستم گزارش‌دهی ۱۰ دقیقه‌ای ارزهای دیجیتال را توضیح می‌دهد.

## مرور کلی

سیستم گزارش‌دهنده ۱۰ دقیقه‌ای، یک برنامه مستقل است که هر ۱۰ دقیقه یک گزارش از قیمت‌های لحظه‌ای ارزهای دیجیتال اصلی را به یک چت تلگرام مشخص ارسال می‌کند. این سیستم به‌صورت مستقل از برنامه اصلی کار می‌کند و حتی اگر برنامه اصلی متوقف شود، به ارسال گزارش‌ها ادامه می‌دهد.

## پیش‌نیازها

برای استفاده از این سیستم به موارد زیر نیاز دارید:

1. توکن بات تلگرام معتبر (در متغیر محیطی `TELEGRAM_BOT_TOKEN`)
2. شناسه چت تلگرام (در متغیر محیطی `DEFAULT_CHAT_ID`)
3. دسترسی به اینترنت برای ارتباط با API تلگرام و منابع قیمت ارزهای دیجیتال

## نحوه راه‌اندازی

برای راه‌اندازی گزارش‌دهنده ۱۰ دقیقه‌ای، از دستور زیر استفاده کنید:

```bash
bash اجرای_گزارش_دهنده_۱۰_دقیقه‌ای.sh
```

این دستور، برنامه را در پس‌زمینه اجرا می‌کند و یک فایل `ten_minute_reporter.pid` ایجاد می‌کند که حاوی شناسه فرآیند (PID) است.

## نحوه توقف

برای توقف گزارش‌دهنده، از دستور زیر استفاده کنید:

```bash
bash توقف_گزارش_دهنده_۱۰_دقیقه‌ای.sh
```

این دستور، فرآیند را متوقف می‌کند و فایل PID را حذف می‌کند.

## بررسی لاگ‌ها

لاگ‌های گزارش‌دهنده در فایل `ten_minute_reporter.log` ذخیره می‌شوند. برای بررسی این لاگ‌ها، از دستور زیر استفاده کنید:

```bash
cat ten_minute_reporter.log
```

یا برای مشاهده زنده:

```bash
tail -f ten_minute_reporter.log
```

## عیب‌یابی

اگر گزارش‌ها ارسال نمی‌شوند، مراحل زیر را بررسی کنید:

1. بررسی کنید که برنامه در حال اجراست:
   ```bash
   if [ -f "ten_minute_reporter.pid" ]; then
       PID=$(cat ten_minute_reporter.pid)
       ps -p $PID
   fi
   ```

2. بررسی لاگ‌ها برای یافتن خطاها:
   ```bash
   tail -n 50 ten_minute_reporter.log
   ```

3. بررسی متغیرهای محیطی:
   ```bash
   echo $TELEGRAM_BOT_TOKEN
   echo $DEFAULT_CHAT_ID
   ```

4. راه‌اندازی مجدد:
   ```bash
   bash توقف_گزارش_دهنده_۱۰_دقیقه‌ای.sh
   bash اجرای_گزارش_دهنده_۱۰_دقیقه‌ای.sh
   ```

## راه‌اندازی خودکار در هنگام بوت

برای راه‌اندازی خودکار در هنگام بوت سیستم، می‌توانید این اسکریپت را به `crontab` اضافه کنید:

```bash
crontab -e
```

و سپس خط زیر را اضافه کنید:

```
@reboot cd /مسیر/به/پوشه/پروژه && bash اجرای_گزارش_دهنده_۱۰_دقیقه‌ای.sh
```