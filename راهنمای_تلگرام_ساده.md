# راهنمای استفاده از سیستم ساده تلگرام

این راهنما نحوه استفاده از سیستم ساده تلگرام را توضیح می‌دهد. این سیستم برای ارسال گزارش‌های مختلف به تلگرام طراحی شده است و از API مستقیم تلگرام استفاده می‌کند.

## مزایای سیستم ساده تلگرام

- وابستگی کمتر به کتابخانه‌های خارجی
- استفاده مستقیم از API تلگرام
- سادگی در نصب و راه‌اندازی
- کارایی بالاتر و منابع کمتر
- قابلیت نصب روی سرورهای با منابع محدود

## فایل‌های اصلی

- `simple_telegram_sender.py`: ماژول اصلی برای ارسال پیام به تلگرام
- `simple_telegram_formatter.py`: ماژول قالب‌بندی پیام‌ها برای تلگرام
- `new_ten_minute_reporter.py`: اسکریپت گزارش‌دهی خودکار هر ۱۰ دقیقه
- `اجرای_تلگرام_ساده.sh`: اسکریپت شل برای راه‌اندازی سرویس
- `توقف_تلگرام_ساده.sh`: اسکریپت شل برای توقف سرویس

## نحوه استفاده

### تست اتصال به تلگرام

برای تست اتصال به تلگرام و دریافت اطلاعات بات:

```bash
python simple_telegram_sender.py info
```

### ارسال پیام تست

برای ارسال یک پیام تست ساده به تلگرام:

```bash
python simple_telegram_sender.py test
```

### ارسال گزارش قیمت‌ها

برای ارسال گزارش قیمت‌های ارزهای دیجیتال:

```bash
python simple_telegram_formatter.py market
```

### ارسال تحلیل تکنیکال

برای ارسال تحلیل تکنیکال یک ارز خاص:

```bash
python simple_telegram_formatter.py analysis BTC/USDT
```

این دستور علاوه بر متن تحلیل، نمودارهای تکنیکال را نیز ارسال می‌کند.

### ارسال فقط نمودار

برای ارسال فقط نمودار تحلیل تکنیکال یک ارز خاص:

```bash
python simple_telegram_formatter.py chart BTC/USDT
```

این دستور فقط نمودارهای تحلیل تکنیکال را ارسال می‌کند (بدون متن تحلیل).

### ارسال سیگنال‌های معاملاتی

برای ارسال سیگنال‌های معاملاتی:

```bash
python simple_telegram_formatter.py signals
```

## راه‌اندازی سرویس خودکار

برای راه‌اندازی سرویس گزارش‌دهی خودکار هر ۱۰ دقیقه:

```bash
bash اجرای_تلگرام_ساده.sh
```

## توقف سرویس خودکار

برای توقف سرویس گزارش‌دهی خودکار:

```bash
bash توقف_تلگرام_ساده.sh
```

## مشاهده لاگ‌ها

برای مشاهده لاگ‌های سرویس در حال اجرا:

```bash
tail -f new_ten_minute_reporter.log
```

## تنظیمات

تنظیمات اصلی در فایل‌های زیر قرار دارند:

- `simple_telegram_sender.py`: تنظیمات مربوط به توکن بات و چت آیدی
- `simple_telegram_formatter.py`: تنظیمات قالب‌بندی پیام‌ها و نمودارها
- `new_ten_minute_reporter.py`: تنظیمات زمان‌بندی و نوع گزارش‌ها
- `chart_generator.py`: تنظیمات مربوط به تولید نمودارهای تحلیل تکنیکال

### تنظیمات نمودارها

تنظیمات نمودارها در فایل `chart_generator.py` قرار دارند. مهمترین تنظیمات عبارتند از:

1. `CHARTS_DIR`: مسیر ذخیره‌سازی نمودارها
2. تنظیمات ظاهری نمودارها مانند رنگ و اندازه در توابع مربوطه

## عیب‌یابی

اگر با مشکلی مواجه شدید:

1. اطمینان حاصل کنید توکن بات و چت آیدی به درستی تنظیم شده‌اند
2. بررسی کنید دسترسی به API تلگرام وجود دارد
3. لاگ‌ها را برای پیدا کردن خطاهای احتمالی بررسی کنید
4. از دستور `python simple_telegram_sender.py info` برای تست اتصال استفاده کنید

### عیب‌یابی نمودارها

در صورت مشکل با نمودارها:

1. اطمینان حاصل کنید کتابخانه‌های `numpy`، `pandas`، `matplotlib` و `mplfinance` نصب شده‌اند
2. مطمئن شوید پوشه `charts` وجود دارد و قابل نوشتن است
3. برای تست تولید نمودار، دستور `python chart_generator.py` را اجرا کنید
4. در صورت خطای `zero-size array to reduction operation maximum which has no identity`، به‌روزرسانی داده‌های ورودی را بررسی کنید

## نکات مهم

- این سیستم برای محیط‌های با محدودیت دسترسی به کتابخانه‌های پیچیده طراحی شده است
- هر ۱۰ دقیقه یک گزارش کامل از بازار ارسال می‌شود
- گزارش‌ها شامل نمودارهای تحلیل تکنیکال برای ارزهای تصادفی هستند
- نمودارها در پوشه `charts` ذخیره می‌شوند و بعد از ارسال پاک نمی‌شوند
- برای تغییر زمان‌بندی، فایل `new_ten_minute_reporter.py` را ویرایش کنید

## گزارش اشکالات

در صورت مشاهده هرگونه مشکل، لطفاً لاگ‌ها را بررسی کرده و به توسعه‌دهنده اطلاع دهید.